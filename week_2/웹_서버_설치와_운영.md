# 웹 서버 설치와 운영

## APM 설치와 서비스 가동 및 설정

APM : Apache, PHP, MySQL   
LAPM : Linux, Apache, PHP, MySQL

> <h3>웹 서버 설치</h3>

![image](https://user-images.githubusercontent.com/43658658/140239212-5aed5686-9518-4fb4-b696-9fdb1efbac24.png)   
apache2, php7.4, mysql-server8.0을 한 번에 설치합니다.   

![image](https://user-images.githubusercontent.com/43658658/140239331-dc2a50b4-98b1-47c1-88db-58bb5f2e61e1.png)   
설치가 잘 되었는지 확인합니다.

> <h3>APM 서비스 가동 및 설정</h3>

![image](https://user-images.githubusercontent.com/43658658/140239458-5e7ec8a3-9041-4fcd-86fa-2c012894f9d4.png)   
아파치 재시작, 상시 가동, 작동 확인(php는 아파치에 포함된 기능)

![image](https://user-images.githubusercontent.com/43658658/140239551-79e87630-601e-4020-85b5-cc9e0f7c85b5.png)   
MySQL 재시작, 상시 가동, 작동 확인

![image](https://user-images.githubusercontent.com/43658658/140239742-ab5b8589-bc0b-4d8f-8cca-7cfe2d282b5a.png)   
로컬 호스트로 접속해서 웹 서버가 정상적으로 작동하는지 확인

![image](https://user-images.githubusercontent.com/43658658/140239857-a80cbc25-ef31-44d1-a6d1-1bf39012b9dd.png)
`vi /var/www/html/phpinfo.php` 파일을 만들고 위의 내용을 입력   
![image](https://user-images.githubusercontent.com/43658658/140239902-3336e068-58b5-4c6e-a582-07f02d652ccf.png)   
php가 정상적으로 작동하는지 확인

![image](https://user-images.githubusercontent.com/43658658/140239983-a9d60eba-c0f5-4bbb-aabc-327d405b46e6.png)   
HTTP 포트를 엽니다.

![image](https://user-images.githubusercontent.com/43658658/140240073-2e5f1a4c-9662-4583-acb2-4b8b8d51ef7c.png)   
윈도우의 웹 브라우저에서 `리눅스 서버의 IP 주소/phpinfo.php`로 접속하면 php 페이지가 나타나는 것을 볼 수 있습니다.   

웹 페이지 또는 php 소스를 `/var/www/html` 디렉토리에 가져다 놓으면 웹 사이트를 운영할 수 있습니다.

## 워드프레스를 활용한 웹 사이트 구축

워드프레스(Wordpress) : 웹 사이트를 구성하도록 도와주는 오픈소스 도구

> <h3>워드프레스 설치</h3>

![image](https://user-images.githubusercontent.com/43658658/140240531-8b69b95c-becf-4aea-a5ca-e79c92724679.png)   
mysql에 접속해서 워드프레스에서 사용할 데이터베이스(wp_db), 사용자(wp_user)를 만듭니다.   
사용자(wp_user)는 데이터베이스(wp_db)의 모든 테이블에 대해 권한을 부여받습니다.

![image](https://user-images.githubusercontent.com/43658658/140240667-e99ed839-c4f8-4b07-8481-2c771cd2ee61.png)   
워드프레스를 다운로드 받습니다.   
![image](https://user-images.githubusercontent.com/43658658/140240740-b34a9c15-e221-408b-9a47-4eb67ddf4fb1.png)   
압축을 풉니다.   
![image](https://user-images.githubusercontent.com/43658658/140240840-e78f98d9-23a9-49f7-bf35-225624be8a5d.png)   
워드프레스 디렉토리가 생성된 것을 확인할 수 있습니다.   
이 워드프레스 디렉토리를 `/var/www/html`로 옮깁니다.   
![image](https://user-images.githubusercontent.com/43658658/140241070-210874ec-0c1e-4e5c-aeb6-a46519014f95.png)   
![image](https://user-images.githubusercontent.com/43658658/140241090-772352bc-b004-416c-ab8c-ac958a38d4fd.png)   
워드프레스 디렉토리의 허가권과 소유권을 변경합니다. 외부에서 접속할 수 있도록 허용하고, 아파치 사용자와 그룹이 소유할 수 있도록 합니다.   

![image](https://user-images.githubusercontent.com/43658658/140241311-aa7b4116-a1b7-4743-9f70-c7c7fb581024.png)   
워드프레스 디렉토리로 들어가서 `wp-config-sample.php` 파일을 `wp-config.php`라는 이름으로 복사합니다.   
![image](https://user-images.githubusercontent.com/43658658/140241472-0b7bbb5f-a2f6-4993-a9c2-ccd0b1074dfa.png)   
`wp-config.php` 파일을 편집합니다.   
앞서 mysql에서 설정한 데이터베이스(wp_db), 사용자(wp_user), 비밀번호를 설정합니다.   
![image](https://user-images.githubusercontent.com/43658658/140241814-4fb90089-87dc-4500-a18e-d44f5bebaea4.png)   
`/etc/apache2/sites-enabled/000-default.conf` 파일을 열어서 워드프레스 디렉토리를 아파치 루트 디렉토리로 설정합니다.   
![image](https://user-images.githubusercontent.com/43658658/140242255-b37cae0f-94a0-4115-a8d1-554f38d0be3e.png)   
`/etc/apache2/apache2.conf` 파일을 열어서 IP 주소, URL을 입력하면 바로 워드프레스 홈페이지가 보이도록 해당 내용을 추가합니다.   
![image](https://user-images.githubusercontent.com/43658658/140242391-393b99e3-3748-456c-a28b-4aa19988aa09.png)   
변경된 설정을 재시작을 통해 적용합니다.

![image](https://user-images.githubusercontent.com/43658658/140242618-cd1b9cd8-b4b7-45b6-8d79-ecea217d30f5.png)   
윈도우의 웹 브라우저에서 리눅스 서버(192.168.111.100)에 접속하면 워드프레스 설치 화면이 나타납니다.   

