# 리눅스 쉘과 명령어 기초

## 기본 설정

> <h3>날짜 설정</h3>

날짜 포맷을 `mm월 dd일 hh:mm` 형식에서 `yyyy-mm-dd hh:mm` 형식으로 변경합니다.

![image](https://user-images.githubusercontent.com/43658658/140843044-fd00bea5-594e-41dd-bafd-f6fe1a3a9d25.png)   
![image](https://user-images.githubusercontent.com/43658658/140842493-caed1898-34c4-41bc-a853-44bbc672be58.png)

> <h3>POSIX</h3>

서로 다른 플랫폼으로의 프로그램 이식성을 향상시키기 위한 표준을 제공하기 위해 만들어진 표준입니다.

## 기본 명령어

> <h3>du 명령어</h3>

![image](https://user-images.githubusercontent.com/43658658/140843637-8b94bcce-0140-4383-bfb2-782b84750ada.png)   
![image](https://user-images.githubusercontent.com/43658658/140843813-354d9fd0-c468-4306-b349-7b774927ffbf.png)   
* `du` : 용량을 알 수 있는 명령어
* `du -h` : 용량 단위를 사용자가 읽기 쉽게 표시(byte, kb, mb, gb 등)
* `|` : 파이프로 앞의 명령의 결괏값을 뒤 명령어의 아규먼트로 넣습니다.
* `sort` : 알파벳, 숫자 순으로 정렬
* `>` : 리다이렉션. 앞의 명령의 결괏값을 뒤의 파일에 저장

> <h3>man 명령어</h3>

`man` 명령어를 통해 리눅스 명령어의 사용법을 볼 수 있습니다.

<`man man`을 실행 했을 때의 모습>   
![image](https://user-images.githubusercontent.com/43658658/140844450-5f8b928f-6f8d-4dc2-8d65-63019ede4e3d.png)

> <h3>date 명령어</h3>

![image](https://user-images.githubusercontent.com/43658658/140844649-4da44e8c-c035-4d20-bb86-e37e257e6c69.png)
* `-u` : UTC 시간으로 나타내주는 옵션
* `+%H:%M` : `시:분` 형식으로 나타내주는 옵션

## 편집모드

리눅스에서 제공되는 편집 모드는 `emacs`와 `vi`가 있습니다.   
기본 편집 모드는 `emacs`로 우리가 일반적으로 명령어를 입력할 때의 편집 모드를 의미합니다.

`shopt -o emacs` 명령어로 emacs 편집 모드의 on/off 상태를 확인할 수 있습니다.
`shopt -o vi` 명령어로 vi 편집 모드의 on/off 상태를 확인할 수 있습니다.

`emacs`, `vi` 편집 모드의 on/off 상태를 변경하려면 `shopt -os emacs/vi`를 입력합니다.   
(둘 중 하나가 on되면 다른 하나는 off됩니다)

## 다중 명령어

하나의 라인에서 여러 개의 명령을 실행하게 하려면 하나의 명령 다음에 `; && ||`을 붙여줍니다.

> <h3>기호의 차이</h3>

`; ||` : 앞의 명령이 실패해도 뒤의 명령을 실행합니다.   
![image](https://user-images.githubusercontent.com/43658658/140845664-605fd557-a046-4007-b669-8c6c4e01bfe4.png)

`&&` : 앞의 명령이 실패하면 뒤의 명령을 실행하지 않습니다.   
![image](https://user-images.githubusercontent.com/43658658/140845703-d0a7bf3e-fcdd-4749-80cb-a7afc0c82bff.png)

## 디렉토리 명령어

> <h3>tree 명령</h3>

디렉토리의 트리 구조를 보여주는 명령어입니다.

* `-a` : 모든 파일
* `-d` : 디렉토리만
* `-f` : 일반 파일만
* `-L 깊이` : 루트 디렉토리부터 해당 깊이까지 보여줍니다.

> <h3>less, more, cat</h3>

* `less` : 파일 내용을 vim 편집기로 보여줍니다.   
![image](https://user-images.githubusercontent.com/43658658/140847139-f19f7a4c-356f-425b-8634-a5ad0b9135c2.png)   
* `more` : 파일 내용이 쉘의 높이보다 길다면 vim 편집기로 보여줍니다.
* `cat` : 파일의 텍스트를 그대로 출력해줍니다.

> <h3>file 명령</h3>

`file 파일명` : 파일의 타입을 보여줍니다.   
![image](https://user-images.githubusercontent.com/43658658/140847322-ce832e66-8e02-4b99-882e-b8d18740adab.png)

<`file *`을 실행 했을 때>   
![image](https://user-images.githubusercontent.com/43658658/140847257-0cec10a9-f9f8-4e33-bb81-186bfb9c6f84.png)

## 기본 디렉토리 구성

* `/boot` : `리눅스 커널`과 `부트로더`가 위치하는 디렉토리
* `/etc` : 시스템의 `환경 설정 파일`이 위치하는 디렉토리
  * `/etc/passwd` : `유저의 각종 정보`를 저장하고 있는 파일
  * `/etc/shadow` : `유저의 패스워드`를 암호화하여 저장하고 있는 파일
  * `/etc/fstab` : 시스템이 부팅될 때 참고하는 `마운트할 디바이스 테이블`을 저장하고 있는 파일
  * `/etc/hosts` : `네트워크 호스트 이름`과 `IP 주소`를 저장하는 파일
  * `/etc/rc.d/init.d 또는 /etc/init.d` : 부팅 시 시작할 여러 가지 시스템 서비스 스크립트를 가지고 있는 디렉토리
  * `/etc/resolv.conf` : 시스템에서 외부로 접속할 때 참고할 `네임서버`를 지정해 두는 파일
  * `/etc/sysconfig/i18n` : 부팅 시 `언어셋 변수`와 `폰트 변수`를 설정하는 파일
  * `/etc/sysconfig/iptables` : 리눅스 `방화벽 iptables 환경 설정`을 저장하고 있는 파일
  * `/etc/sysconfig/network` : 부팅 시 `네트워크를 지원할 것인지`와 `호스트명`을 설정하는 파일
  * `/etc/sysconfig/network-scripts/ifcfg-eth0` : 부팅 시 사용할 `첫 번째 이더넷 카드의 정보`를 저장하고 있는 파일
* `/bin, /usr/bin` : `실행 프로그램`들이 저장되어 있는 디렉토리. `/bin`에는 기본적인 실행 프로그램들이 위치, `/usr/bin`에는 사용자들이 사용할 실행 프로그램들이 위치
* `/sbin, /usr/sbin` : `시스템 관리자(슈퍼유저, root)를 위한 프로그램`들이 위치
* `/usr` : 사용자 애플리케이션을 지원하기 위한 다양한 파일들이 위치
  * `/usr/share/X11` : `windows 시스템을 지원`하는 파일들
  * `/usr/share/dict` : 스펠링 체크를 위한 `사전` 파일들
  * `/usr/share/doc` : 다양한 포맷의 `문서` 파일들
  * `/usr/share/man` : 리눅스 `man페이지` 파일들
  * `/usr/src` : 소스코드 파일들이 위치. 커널 소스코드 패키지를 볼 수 있습니다.
* `/usr/local` : 소프트웨어 설치 시 로컬머신에서 사용할 파일들이 위치. 다운로드 받은 소스파일들을 기본 옵션으로 컴파일하면 해당 디렉토리가 기본 설치 위치가 됩니다. 실행파일은 `/usr/local/bin` 디렉토리에 위치.
* `/var` : 운영 중인 시스템의 변화를 체크할 수 있는 각종 로그 파일들이 위치
  * `/var/log` : 로그 파일이 위치하는 디렉토리.
  * `/var/spool` : 메일 메시지와 프린트 작업과 같이 프로세스를 위한 큐를 잡아놓기 위해 사용되는 디렉토리. 로컬 시스템에 유저의 메일이 도착했을 때 메일 메시지는 `/var/spool/mail` 디렉토리 아래의 각 유저명과 매칭되는 파일에 저장됩니다.
* `/lib` : 공유 라이브러리 파일들이 위치.
* `/home` : 유저별 홈디렉토리가 존재하는 개인 홈디렉토리. `useradd` 명령어를 입력하면 `/home/유저아이디` 형식으로 유저의 홈디렉토리가 생성됩니다.
* `/root` : 슈퍼유저의 홈디렉토리
* `/tmp` : 임시 파일들이 저장되는 디렉토리
* `/dev` : 리눅스 시스템에서 사용하는 디바이스 장치 파일들이 위치.
* `/proc` : 커널 관련 정보를 가지는 파일들이 존재하며 운영 중인 시스템의 모든 프로세스에 대해 번호가 붙여진 그룹을 가집니다.
  * `/proc/cpuinfo` : 현재 시스템의 CPU 정보가 저장.
  * `/proc/meminfo` : 메모리 정보가 저장.
* `/media, /mnt` : 마운트 포인트를 위해 사용되는 디렉토리. 다양한 물리적 저장 장치를 마운트할 디렉토리.
  * 부팅 시 `/etc/fstab` 파일을 읽어서 목록에 있는 디바이스를 지정한 디렉토리에 마운트. floppy, cdrom과 같은 이동형 저장장치는 `/media, /mnt`에 마운트.

## 파일과 디렉토리 다루기

> <h3>와일드카드</h3>

![image](https://user-images.githubusercontent.com/43658658/140850482-ffde2f21-df56-4f34-a3cc-118e463b0e26.png)   

* `t*` : t로 시작하는 모든 파일
* `t*.txt` : t로 시작하고 확장자가 .txt인 파일
* `te???????` : te로 시작하고 뒤에 7개의 문자가 붙어있는 파일.
* `[ts]*` : t 또는 s로 시작하는 파일
* `[[:upper:]]*` : 알파벳 대문자로 시작하는 파일
* `*[![:upper:]].*` : 확장자 전 파일명의 마지막 문자가 알파벳 대문자가 아닌 모든 파일.

## 입출력 리다이렉션과 파이프

> <h3>표준 출력</h3>

커맨드 라인 프로그램들은 결과를 모니터에 출력합니다. 이를 `표준 출력`이라고 합니다.

> <h3>리다이렉션</h3>

`>` 기호를 이용해 리다이렉션이 가능합니다.   
`ls > 출력할파일명` : `표준 출력 내용`을 [출력할 파일명]에 저장합니다.   
(표준 에러 내용은 리다이렉션하지 않습니다)

![image](https://user-images.githubusercontent.com/43658658/140852063-8c94f132-11c9-4fd9-99ad-28f20d4a18c3.png)   
![image](https://user-images.githubusercontent.com/43658658/140852121-1460e5b1-f719-4b5b-8832-ec2c151a10cb.png)   

기존 파일에 내용을 추가해서 표준 출력 내용을 저장하고 싶다면 `>>` 기호를 이용합니다.   
![image](https://user-images.githubusercontent.com/43658658/140852606-8c7757f7-9b7d-44a0-84f0-979326c597ad.png)   
![image](https://user-images.githubusercontent.com/43658658/140852690-294a5eeb-f6e6-492d-b5a4-e7396519b3d5.png)   

기존 텍스트 파일의 내용을 모두 지우고 빈 파일로 만들고 싶다면, `cat /dev/null > ls.txt` 또는 `echo "" > ls.txt`를 실행합니다.   
![image](https://user-images.githubusercontent.com/43658658/140852938-5827eb93-7a93-48c4-9408-d73e4a922289.png)   
![image](https://user-images.githubusercontent.com/43658658/140853008-da6ddcf5-880b-433d-b9f2-c5e1c07bbcce.png)   

> <h3>표준 입출력 파일 디스크립터</h3>

* 표준 입력 : 0
* 표준 출력 : 1
* 표준 에러 : 2

![image](https://user-images.githubusercontent.com/43658658/140853770-d8059c2e-5a59-4577-a57b-36560d76bcc0.png)   
존재하지 않는 linuxer.txt 파일을 보여달라 했으므로, 표준 에러 내용(2)이 모니터에 출력됩니다.   
![image](https://user-images.githubusercontent.com/43658658/140853872-f133f27f-40a8-4ff8-8ded-4441e5e729bf.png)   
리다이렉션은 표준 출력 내용(1)만 전달하므로 여전히 표준 에러 내용(2)는 모니터에 출력됩니다.   
![image](https://user-images.githubusercontent.com/43658658/140853962-d9458bb4-bbee-40ec-a664-1ee8492b01ef.png)   
`2>&1`를 통해 표준 에러 내용(2)도 표준 출력 내용(1)으로 전달하라고 했습니다.   
그럼 표준 에러 내용(2)도 표준 출력 내용(1)에 포함되고 표준 출력 내용(1)은 리다이렉션 되어 /dev/null에 저장되므로 모니터에는 아무 내용도 출력되지 않습니다.

> <h3>표준 입력</h3>

`<` 기호를 통해 입력 받을 수 있습니다.

`sort < [입력받을 파일명]` : 입력받을 파일에서 내용을 입력받아 정렬합니다.   
![image](https://user-images.githubusercontent.com/43658658/140854486-4a03724a-f022-41fe-bede-35411bb77742.png)
![image](https://user-images.githubusercontent.com/43658658/140854521-67fc60a3-f2a7-40a1-b13b-7c881e011a0c.png)   

> <h3>파이프</h3>

파이프(`|`)는 앞의 결괏값을 뒤 명령어의 argument로 사용하도록 하는 역할을 합니다.

`ls -l | less`는 파일 리스트를 less 명령어가 argument로 받아서 출력합니다.   
![image](https://user-images.githubusercontent.com/43658658/140854888-1c9e01d5-4cf2-4227-badd-d2638bae9d5b.png)   
파일 리스트의 길이가 터미널 높이보다 긴 경우 유용하게 사용할 수 있습니다.   
상/하 방향키, `[Ctrl+U], [Ctrl+D]`로 위아래로 자유롭게 옮겨 다닐 수 있습니다.














